#graph-title
#chart_div{:style=>"width: 900px; height: 500px;"}

=content_for :head do  
  = javascript_include_tag "https://www.google.com/jsapi", "application"


  :javascript
     var data_invoices = #{raw summary_y_axis2(summaries, start_date, 'invoices')};
     var data_payments = #{raw summary_y_axis2(summaries, start_date, 'payments')};

     
    google.load("visualization", "1", {packages:["corechart"]});

   
    function drawItems(graph_type) {

      //google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable(graph_type === 'invoices' ? data_invoices : data_payments);
        var title = graph_type === 'invoices' ? "Total Invoices Closed" : "Total Payments"
        var options = {
          title: title,
          hAxis: {title: 'Year', titleTextStyle: {color: 'red'}}
        };

        var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
            drawChart();

     }
     
     //     drawItems('payments');

     
     $(function () {
          drawItems('invoices');

     
      $('.dropdown-toggle').dropdown();

    $('.graph_link').click(function(){
            var graph_type = $(this).attr('data-graph');
            drawItems(graph_type); 
            $("#dropdown-graph").removeClass("open");
   
            return false;            
          });
          
   
      });